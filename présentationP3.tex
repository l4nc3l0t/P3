% !TEX root = PSanté_03_présentation.tex

\usefonttheme{serif}
\usepackage{fontspec}
	\setmainfont{TeX Gyre Heros}
\usepackage{unicode-math}
\usepackage{lualatex-math}
	\setmathfont{TeX Gyre Termes Math}
\usepackage{polyglossia}
\setdefaultlanguage[frenchpart=false]{french}
\setotherlanguage{english}
\usepackage{microtype}
\usepackage[locale = FR,
            separate-uncertainty,
            multi-part-units = single,
            range-units = single]{siunitx}
	\DeclareSIUnit\an{an}
  \DeclareSIUnit{\octet}{o}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{array}
\usepackage{graphicx}
\graphicspath{{./Figures/}}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{multicol}
    \newcolumntype{L}{>{\raggedright\arraybackslash}X}
    \newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\usepackage{tikz}
\usetikzlibrary{mindmap}
\usetikzlibrary{overlay-beamer-styles}
\usepackage{subcaption}
\usepackage[]{animate}
\usepackage{float}
\usepackage{csquotes}

\usetheme[secheader
         ]{Boadilla}
\usecolortheme{seagull}
\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{itemize items}{-}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{bibliography item}{}
\setbeamerfont{framesubtitle}{size=\large}
\setbeamertemplate{section in toc}[sections numbered]
%\setbeamertemplate{subsection in toc}[subsections numbered]

\title[Concevez une application au service de la santé publique]{Projet 3 : Concevez une application au service de la santé publique}
\author[Lancelot \textsc{Leclercq}]{Lancelot \textsc{Leclercq}} 
\institute[]{}
\date[]{\small{2 novembre 2021}}

\AtBeginSection[]{
  \begin{frame}
  \vfill
  \centering
    \usebeamerfont{title}\insertsectionhead\par%
  \vfill
  \end{frame}
}

\begin{document}
\setbeamercolor{background canvas}{bg=gray!20}
\begin{frame}[plain]
  \titlepage
\end{frame}

\begin{frame}{Sommaire}
  \Large
  \begin{columns}
    \begin{column}{.7\textwidth}
      \tableofcontents[hideallsubsections]
    \end{column}
  \end{columns}
\end{frame}

\section{Introduction}
\subsection{Problématique}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.6\textwidth}
      \begin{itemize}
        \item Application au service de la santé publique
        \item[]
        \item Idées d'application en lien avec l'alimentation
      \end{itemize}
    \end{column}
    \begin{column}{.4\textwidth}
      \includegraphics[width=.8\textwidth]{./Sante-publique-France-logo.pdf}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Jeu de données}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.6\textwidth}
      \begin{itemize}
        \item Jeu de données issu de Open Food Facts
        \item[]
        \item Base de donnée ouverte et participative
        \item[]
        \item Repertorie les ingrédients, les allergènes, composition nutritionnelle, les labels, l'origine, etc
        \item[]
        \item Grosse base de données (environ \qty{4.5}{\giga\octet})
      \end{itemize}
    \end{column}
    \begin{column}{.4\textwidth}
      \centering
      \includegraphics[width=.8\textwidth]{./openfoodfacts-logo-en.pdf}
    \end{column}
  \end{columns}
\end{frame}

\section{Idée d'application}
\subsection{MIAM Iteractive Alimentation Manager}
\begin{frame}{\insertsubsection}
  \begin{columns}[t]
    \begin{column}{.4\textwidth}
      À partir des données présentent dans la base de données
      \begin{itemize}
        \item[]
        \item Pouvoir scanner un produit et trouver des alternatives similaires de meilleure qualité
              \begin{itemize}
                \item Meilleures pour la santé
                      \begin{itemize}
                        \item Avec moins d'additifs
                      \end{itemize}
                \item Meilleures pour l'environement
                      \begin{itemize}
                        \item Origine plus proche
                      \end{itemize}
                \item Voir les deux
              \end{itemize}
        \item[]
        \item Pouvoir choisir selon un régime alimentaire particulier
              \begin{itemize}
                \item Végétarien
                \item Vegan
                \item Halal
                \item Kasher
                \item Sans gluten
                \item etc
              \end{itemize}
      \end{itemize}
    \end{column}
    \begin{column}{.6\textwidth}
      Exemple du cas des saucisses :
      \begin{itemize}
        \item[]
        \item Nombre total d'aliments de ce type : 9120
      \end{itemize}
      \begin{table}
        \small
        \input{./Tableaux/SaucisseCat.tex}
      \end{table}
      \begin{table}
        \input{./Tableaux/SaucisseNbRegime.tex}
      \end{table}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\insertsubsection}
  Développer l'aspect participatif en incrémentant des données dans la base de données
  \begin{itemize}
    \item[]
    \item Beaucoup de lacunes dans les données
          \begin{itemize}
            \item[] Implémenter un système de reconnaissance d'image
              permettant d'extraire les données manquantes des photos des étiquettes
          \end{itemize}
    \item[]
    \item Permettre de renseigner le prix de l'aliment et  de comparer le prix
          entre les aliments selon la qualité
          \begin{itemize}
            \item Création de listes par l'utilisateur pour évaluer le prix d'un panier
            \item[]
            \item Création de listes automatique d'aliments similaires de meilleure qualité à partir des listes établies
            \item[]
            \item Pouvoir comparer le prix des paniers/listes entre elles permettrait aux ménages de voir
                  la différence de budget entre différents paniers de qualités variées
                  et pouvoir choisir quel type d'alimentation il veulent/peuvent s'offrir
                  en fonction de la part du pouvoir d'achat qu'ils sont prêt à mettre dans l'alimentation
          \end{itemize}
  \end{itemize}
\end{frame}

\section{Nettoyage du jeu de données}
\subsection{Produits vendus en France}
\begin{frame}{\insertsubsection}
  \begin{columns}[T]
    \begin{column}{.4\textwidth}
      \begin{itemize}
        \item Sélection des produits vendus en France
        \item \num{850000} entrées sur les 2 millions d'origine
      \end{itemize}
    \end{column}
    \begin{column}{.6\textwidth}
      \begin{itemize}
        \item Suppression des colonnes dans lesquelles on a moins de 1\% de données
              et des colonnes contenant des tags et des versions anglaises qui sont redondantes avec les
              colonnes du mêmes nom
        \item 57 colonnes restantes sur les 186 d'origine
      \end{itemize}
    \end{column}
  \end{columns}
  \vfill
  \begin{figure}
    \includegraphics[width=.74\textwidth]{DataDropFinal.pdf}
  \end{figure}
\end{frame}

\subsection{Nettoyage des outliers}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.3\textwidth}
      \begin{itemize}
        \item Valeurs extrêmes pour :
              \begin{itemize}
                \item Quantité servie
                \item Empreinte carbone
                \item Énergie
              \end{itemize}
        \item[]
        \item Des valeurs très importantes là où le nombre de valeurs est très faible
        \item[]
        \item Nous écartons ces valeurs lorsqu'elles sont en dehors du quartile qui contient 99\% des valeurs
        \item[] 
        \item Données pour 100g conservées uniquement entre 0 et 100
      \end{itemize}
    \end{column}
    \begin{column}{.7\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{subplotHistNettoyage.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.3\textwidth}
      \begin{itemize}
        \item On obtient des distributions plus intéressantes
        \item[]
        \item Fonctionnement assez similaire des différents types d'énergies
      \end{itemize}
    \end{column}
    \begin{column}{.7\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{subplotHistQ99.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Données redondantes}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.4\textwidth}
      \begin{itemize}
        \item Mêmes valeurs energy\_100g et energy-kj\_100g
        \item[]
        \item Variation pour ce qui est de l'energie en kcal pour 100g
        \item[]
        \item Nous n'allons garder que les colonnes avec des unités d'énergie : kcal et kj
        \item[]
        \item De même nous allons supprimer les colonnes finissant par \_tags et \_en
              qui contiennent des données redondantes des colonnes du même nom sans suffixes
      \end{itemize}
    \end{column}
    \begin{column}{.6\textwidth}
      \begin{figure}
        \includegraphics[width=.9\textwidth]{EnergyReg.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\section{Exploration du jeu de données}
\subsection{Analyse univariée}
\begin{frame}{\insertsubsection}
  \begin{table}
    \tiny
    \input{./Tableaux/StatsNum1.tex}
    \input{./Tableaux/StatsNum2.tex}
    \resizebox{\textwidth}{!}{\input{./Tableaux/StatsNum3.tex}}
    \caption{Tableaux des statistiques sur chaques variables numériques}
  \end{table}
\end{frame}

\begin{frame}{\insertsubsection}
  \begin{figure}
    \includegraphics[height=.8\textheight]{subplotBox}
  \end{figure}
\end{frame}

\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{itemize}
        \item Observation du nombre d'occurences de chaques catégories de nutriscore
        \item[]
        \item Diagramme circulaire permet de visualiser les proportions
        \item[]
          \begin{itemize}
            \item \qty{50}{\percent} des aliments sont de catégorie D ou E
            \item \qty{75}{\percent} sont de catégorie C, D ou E
            \item seulemnt 1/4 des produits sont de catégorie A ou B
          \end{itemize}
        \item[]
        \item Il n'y a qu'une chance sur 4 de tirer un produit de bonne qualité au hasard
        \item[]
        \item Permettre au consommateur de mieux choisir ses aliments permettra d'améliorer la santé publique
      \end{itemize}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{NutriPie.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Analyse bivariée}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.55\textwidth}
      \begin{itemize}
        \item Les catégories du nutriscore semblent corrélées avec le score
        \item[]
        \item Vérification par ANOVA à une dimension
        \item H0 les moyennes des différentes catégories ne varient pas en fonction du score
      \end{itemize}
      \begin{table}
        \tiny
        \input{./Tableaux/ANOVANutriScoreGrade.tex}
        \caption{Résultats de l'ANOVA à une dimension entre le score du nutriscore et ses catégories}
      \end{table}
      \begin{itemize}
        \item p-value \qty{< 5}{\percent} on rejette l'hypothèse pour chaque catégories
      \end{itemize}
    \end{column}
    \begin{column}{.45\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{NutriBox.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\subsubsection{Matrice des corrélations}
\begin{frame}{\insertsubsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{itemize}
        \item La matrice des corrélations nous permet d'observer quelles variables
              semblent fonctionner de façon similaire
              \begin{itemize}
                \item l'énergie comme (vu durant le nettoyage)
                \item l'énergie avec le gras
                \item le gras et le gras saturé
                \item les carbohydrates et le sucre
                \item le sel et le sodium
              \end{itemize}
        \item[]
        \item Nous allons faire quelques regressions entre ces variables qui semblent fonctionner
              de pair
      \end{itemize}
    \end{column}
    \begin{column}{.5\textwidth}
      \includegraphics[width=.98\textwidth]{HeatmapNum.pdf}
    \end{column}
  \end{columns}
\end{frame}

\subsubsection{Régressions}
\begin{frame}{\insertsubsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{SelReg.pdf}
        \includegraphics[width=\textwidth]{EnergyFatReg.pdf}
      \end{figure}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{SucreReg.pdf}
        \includegraphics[width=\textwidth]{GrasReg.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Analyse multivariée : nutriscore et variables sucre, sel, gras et energie}
\begin{frame}{\insertsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{itemize}
        \item Régression multiple entre le nutriscore et les variables
              sucre, gras, sel et energie
        \item[]
        \item H0 les moyennes des variables sont égales entre elles
              ainsi qu'avec celle du nutriscore
        \item[]
        \item p-value \qty{< 5}{\percent} les variables ne sont donc pas très similaires
        \item[]
        \item Nous allons tout de même réaliser quelques graphiques des régressions
              entre Nutriscore et chaques variables
      \end{itemize}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{table}
        \tiny
        \input{./Tableaux/MultiReg}
      \end{table}
    \end{column}
  \end{columns}
\end{frame}

\subsubsection{Régressions avec le nutriscore}
\begin{frame}{\insertsubsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{NutriEnergyReg.pdf}
        \includegraphics[width=\textwidth]{NutriSucreReg.pdf}
      \end{figure}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{figure}
        \includegraphics[width=\textwidth]{NutriGrasReg.pdf}
        \includegraphics[width=\textwidth]{NutriSelReg.pdf}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\subsubsection{ACP}
\begin{frame}{\insertsubsubsection}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \begin{itemize}
        \item L'ACP permet de regrouper des variables qui fonctionnent de manière similaire
        \item[]
        \item ACP sur les colonnes numériques
        \item[]
        \item Le graphique des variances cumulées nous montre qu'il n'y a pas de rupture nette ("coude")
              dans la part expliquée des différentes composantes
      \end{itemize}
    \end{column}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{ScreePlot.pdf}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF1F2.pdf}
    \end{column}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF1F3.pdf}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF1F4.pdf}
    \end{column}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF2F3.pdf}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \begin{columns}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF2F4.pdf}
    \end{column}
    \begin{column}{.5\textwidth}
      \includegraphics[width=\textwidth]{PCAF3F4.pdf}
    \end{column}
  \end{columns}
\end{frame}

\section{Conclusion}
\begin{frame}
  \begin{itemize}
    \item Jeu de données important
          \begin{itemize}
            \item Malgrès les lacunes il y a énormément d'informations sur les produits
            \item[]
            \item Permet de faire des choix précis au niveau du type d'alimentation dans l'application
          \end{itemize}
    \item[]
    \item Présences de liens vers des étiquettes dans la base de donnée permettrait d'entraîner un modèle de reconnaissance
          d'images afin d'implémenter la lecture des éléments manquants
    \item[]
    \item L'ACP permet de mieux visualiser les liens entre variables
          \begin{itemize}
            \item Permet de catégoriser les aliments selon des critères plus larges que les variables
            \item[]
            \item Utile pour regrouper des produits et permettre de proposer des listes pertinentes dans l'application
          \end{itemize}
    \item[]
    \item Face aux maladies dites de civilisation (diabète, obésité, etc), permettre aux consommateurs
          de mieux se nourrir pourra participer à l'amélioration de la santé publique
  \end{itemize}
\end{frame}

\end{document}